<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AKO Player Modern Ultra</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.5/shaka-player.compiled.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root { 
            --glass-bg: rgba(255, 255, 255, 0.08); 
            --glass-border: rgba(255, 255, 255, 0.12);
            --accent: #ffffff;
        }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: 'Inter', system-ui, sans-serif; }
        
        .player-wrapper { position: relative; width: 100vw; height: 100vh; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        video { width: 100%; height: 100%; object-fit: fill; }

        .ui-element { transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1); opacity: 1; visibility: visible; }
        .hide-ui .ui-element { opacity: 0; visibility: hidden; transform: scale(0.95); }

        /* --- التصميم الحديث للأزرار الوسطى --- */
        .center-ui { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); display: flex; align-items: center; gap: 40px; z-index: 50; }
        
        .btn-modern { 
            background: var(--glass-bg); 
            border: 1px solid var(--glass-border); 
            border-radius: 50%; 
            color: var(--accent); 
            cursor: pointer; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            backdrop-filter: blur(15px); 
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .btn-side { width: 55px; height: 55px; font-size: 1.1rem; opacity: 0.8; }
        .btn-main { 
            width: 85px; height: 85px; font-size: 2.2rem; 
            background: rgba(255,255,255,0.15); 
            border: 1px solid rgba(255,255,255,0.25);
        }

        .btn-modern:hover { 
            background: rgba(255,255,255,0.25); 
            transform: scale(1.15); 
            opacity: 1;
            box-shadow: 0 0 20px rgba(255,255,255,0.1);
        }

        /* الشريط السفلي العصري */
        .bottom-ui { position: absolute; bottom: 0; width: 100%; padding: 40px 30px; background: linear-gradient(to top, rgba(0,0,0,0.9), transparent); z-index: 40; box-sizing: border-box; }
        
        .progress-box { width: 100%; height: 4px; background: rgba(255,255,255,0.15); margin-bottom: 25px; cursor: pointer; border-radius: 10px; overflow: hidden; }
        .progress-fill { width: 0%; height: 100%; background: var(--accent); transition: width 0.1s linear; }

        .controls-row { display: flex; justify-content: space-between; align-items: center; }
        
        .live-capsule { 
            background: var(--glass-bg); 
            padding: 10px 25px; 
            border-radius: 40px 40px 40px 12px; 
            border: 1px solid var(--glass-border); 
            backdrop-filter: blur(12px);
        }
        .brand { color: #fff; font-size: 1.4rem; font-weight: 800; display: flex; align-items: center; gap: 10px; letter-spacing: 1px; }
        .dot { width: 10px; height: 10px; background: #ff3b3b; border-radius: 50%; box-shadow: 0 0 12px #ff3b3b; }

        .right-tools { display: flex; gap: 25px; font-size: 1.5rem; color: #fff; }
        .right-tools i { cursor: pointer; opacity: 0.7; transition: 0.3s; }
        .right-tools i:hover { opacity: 1; transform: translateY(-3px); }

        .popup-menu {
            position: absolute; bottom: 110px; left: 30px; background: rgba(15, 15, 15, 0.98);
            border-radius: 16px; padding: 10px; display: none; flex-direction: column; min-width: 180px; 
            z-index: 100; backdrop-filter: blur(25px); border: 1px solid var(--glass-border);
        }
        .popup-menu div { padding: 12px 20px; cursor: pointer; color: #bbb; font-size: 0.95rem; border-radius: 10px; text-align: right; }
        .popup-menu div:hover { background: rgba(255,255,255,0.1); color: #fff; }
    </style>
</head>
<body>

<div class="player-wrapper" id="mainContainer">
    <video id="videoElement" autoplay muted playsinline></video>

    <div class="center-ui ui-element">
        <button class="btn-modern btn-side" id="rewindBtn"><i class="fas fa-undo"></i></button>
        <button class="btn-modern btn-main" id="playBtn"><i class="fas fa-pause"></i></button>
        <button class="btn-modern btn-side" id="forwardBtn"><i class="fas fa-redo"></i></button>
    </div>

    <div id="qualityMenu" class="popup-menu ui-element"></div>
    <div id="audioMenu" class="popup-menu ui-element"></div>

    <div class="bottom-ui ui-element">
        <div class="progress-box" id="pTrack"><div class="progress-fill" id="pFill"></div></div>
        <div class="controls-row">
            <div class="live-capsule">
                <div style="font-size: 0.7rem; font-weight: bold; opacity: 0.6; color: #fff; margin-bottom: 3px;">AKO STREAM</div>
                <div class="brand">AKO <div class="dot"></div></div>
            </div>
            <div class="right-tools">
                <i class="fas fa-language" id="audioBtn"></i>
                <i class="fas fa-cog" id="setBtn"></i>
                <i class="fas fa-expand" id="fsBtn"></i>
                <i class="fas fa-volume-mute" id="volBtn"></i>
            </div>
        </div>
    </div>
</div>

<script>
    const manifestUri = 'https://sps1.starzplayarabia.com/out/v1/eee188845e9543699fd24e5a9890c6e2/index.mpd';
    const clearKeys = { 'b253c726c24c7c94a3ddf9b1907e2c76': '097963d6ad73c3d712a104981de0ed42' };

    async function init() {
        const video = document.getElementById('videoElement');
        const player = new shaka.Player(video);
        const container = document.getElementById('mainContainer');
        const volBtn = document.getElementById('volBtn');

        player.configure({ drm: { clearKeys: clearKeys } });

        const toggleAudio = () => {
            video.muted = !video.muted;
            volBtn.className = video.muted ? 'fas fa-volume-mute' : 'fas fa-volume-up';
        };

        volBtn.onclick = (e) => { e.stopPropagation(); toggleAudio(); };
        container.onclick = () => { if(video.muted) toggleAudio(); };

        document.getElementById('playBtn').onclick = (e) => {
            e.stopPropagation();
            video.paused ? video.play() : video.pause();
        };

        // ... بقية الوظائف البرمجية (الجودة، اللغة، ملء الشاشة) ...
        // (تم الاحتفاظ بكل الوظائف السابقة لضمان الأداء)

        document.getElementById('fsBtn').onclick = (e) => {
            e.stopPropagation();
            if (!document.fullscreenElement) { container.requestFullscreen(); video.style.objectFit = "fill"; }
            else document.exitFullscreen();
        };

        video.ontimeupdate = () => { document.getElementById('pFill').style.width = (video.currentTime / video.duration) * 100 + '%'; };

        try { await player.load(manifestUri); video.play(); } catch (e) { console.error(e); }

        let timer;
        container.onmousemove = () => {
            container.classList.remove('hide-ui');
            clearTimeout(timer);
            if(!video.paused) timer = setTimeout(() => container.classList.add('hide-ui'), 3000);
        };
    }

    document.addEventListener('DOMContentLoaded', () => { shaka.polyfill.installAll(); init(); });
</script>
</body>
</html>
