<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>جدول مباريات اليوم</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap">
<style>
    body {
        font-family: 'Cairo', sans-serif;
        background: linear-gradient(to bottom, #192842, #192842);
        color: white;
        padding: 20px;
        direction: rtl;
        padding-bottom: 80px;
        -webkit-user-select: none;  /* For Safari */
        -ms-user-select: none;      /* For Internet Explorer/Edge */
        user-select: none;          /* Standard syntax */
    }

    .match-row {
        background: linear-gradient(to right, #100f8a 50%, #09034a);
        border: none;
        border-radius: 8px;
        margin-bottom: 15px;
        padding: 15px;
        display: flex;
        flex-direction: column;
        align-items: center;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
        overflow: hidden;
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
    }
    
    .match-row:focus {
        outline: 2px solid white;
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
    }
    
    .league-name {
        font-size: 14px;
        font-weight: bold;
        color: #ddd;
        margin-bottom: 10px;
    }

    .teams-time {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
    }

    .team {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        flex: 1;
    }

    .team img, .team .protv-logo {
        width: 60px;
        height: 60px;
        object-fit: contain;
        margin-bottom: 5px;
    }

    .protv-logo {
        border: 2px solid white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 700;
        font-size: 12px;
    }

    .team-name {
        font-size: 8px;
        font-weight: 700;
    }

    .match-time {
        display: flex;
        justify-content: center;
        align-items: center;
        flex: 1;
    }

    .countdown-circle {
        position: relative;
        width: 60px;
        height: 60px;
        border-radius: 50%;
    }

    .countdown-circle svg {
        transform: rotate(-90deg);
        width: 100%;
        height: 100%;
    }

    .countdown-circle circle {
        fill: none;
        stroke-width: 5;
        r: 28;
        cx: 30;
        cy: 30;
    }

    .countdown-circle .bg {
        stroke: white;
        opacity: 0.3;
    }

    .countdown-circle .progress {
       stroke: red;
        stroke-linecap: round;
        stroke-dasharray: 175.84;
        stroke-dashoffset: 175.84;
        transition: stroke-dashoffset 0.5s linear;
    }

    .countdown-circle .time-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-weight: bold;
        font-size: 7px;
        display: flex;
        flex-direction: column;
        align-items: center;
        line-height: 1.2;
    }

    .countdown-circle .penalties {
        font-size: 10px;
        opacity: 0.7;
    }

    .countdown-circle .timer-small-text {
        font-size: 12px;
        font-weight: normal;
        display: block;
        line-height: 1;
        margin-top: 2px;
    }

    .countdown-circle .countdown-time {
        font-size: 12px;
        line-height: 1;
        text-align: center;
    }

    .countdown-circle .countdown-hours,
    .countdown-circle .countdown-minutes,
    .countdown-circle .countdown-seconds {
        font-size: 10px;
        font-weight: normal;
        margin: 0;
        line-height: 1;
    }
    
    .match-score-finished {
        background: linear-gradient(to bottom, #80001A, #AB012B,#80001A);
        border: 1px solid white;
        border-radius: 5px;
        padding: 10px 15px;
        text-align: center;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-width: 60px;
        height: 60px;
        box-sizing: border-box;
    }

    .match-score-finished .main-score {
        font-size: 9px;
        font-weight: bold;
        color: white;
    }

    .match-score-finished .penalties-score {
        font-size: 6px;
        color: white;
        margin-top: 2px;
    }

    .channel-container {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-top: 15px;
        width: 100%;
        justify-content: center;
        align-items: center;
    }

    .watch-btn-container {
        position: relative;
        width: 100%;
        margin: 0 auto;
        max-width: 100%;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .watch-btn {
        background: linear-gradient(to bottom, #80001A, #AB012B,#80001A);
        border: none;
        color: white;
        border-radius: 6px;
        padding: 10px 15px;
        font-weight: 700;
        cursor: pointer;
        text-decoration: none;
        width: 100%;
        text-align: center;
        font-family: 'Cairo', sans-serif;
        display: block;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    }
    .watch-btn:focus {
        outline: 2px solid white;
        background: linear-gradient(to bottom, #AB012B, #80001A, #AB012B);
    }

    .finished-btn {
        background: linear-gradient(to bottom, #80001A, #AB012B,#80001A);
        color: white;
        padding: 10px 15px;
        border-radius: 6px;
        font-weight: 700;
        cursor: default;
        text-align: center;
        width: 100%;
    }

    .not-started-btn {
        background: linear-gradient(to bottom, #999, #fff,#999);
        color: #000;
        padding: 10px 15px;
        border-radius: 6px;
        font-weight: 700;
        cursor: default;
        text-align: center;
        width: 100%;
    }

    .edit-icon {
        display: none;
    }

    .loading-spinner {
        border: 4-px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top: 4-px solid #fff;
        width: 30px;
        height: 30px;
        animation: spin 1s linear infinite;
        margin: 20px auto;
        display: none;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    #progress-bar-container {
        width: 80%;
        max-width: 600px;
        height: 10px;
        background-color: #333;
        border-radius: 5px;
        margin: 10px auto;
        overflow: hidden;
        display: none;
    }

    #progress-bar {
        width: 0%;
        height: 100%;
        background-color: #fff;
        transition: width 0.3s ease;
    }

    .modal {
        display: none;
        position: fixed;
        z-index: 100;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.8);
        padding-top: 60px;
    }

    .modal-content {
    background-color: #1a1a1a;
    margin: 5% auto;
    padding: 20px;
    padding-top: 40px; 
    border: 1px solid #888;
    width: 90%;
    max-width: 300px;
    max-height: 50vh; /* تحديد أقصى ارتفاع */
    overflow-y: auto; /* إضافة التمرير العمودي */
    border-radius: 10px;
    position: relative;
}


    .modal-title {
        display: none;
    }

    .close-btn {
        color: white;
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 28px;
        font-weight: bold;
    }

    .close-btn:hover,
    .close-btn:focus {
        color: #ff0000;
        text-decoration: none;
        cursor: pointer;
    }

    .server-list {
        list-style-type: none;
        padding: 0;
        margin-top: 20px;
    }

    .server-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: linear-gradient(to right, #2a2a2a, #000000);
        padding: 10px;
        border-radius: 6px;
        margin-bottom: 10px;
    }

    .server-item span {
        flex: 1;
        text-align: right;
    }

    .live-server-btn {
        background: linear-gradient(to right, #FF0000, #CC0000);
        border: none;
        color: white;
        border-radius: 6px;
        padding: 10px 15px;
        font-weight: 700;
        cursor: pointer;
        text-decoration: none;
        width: 100%;
        text-align: center;
        font-family: 'Cairo', sans-serif;
        display: block;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    }
    .live-server-btn:focus {
        outline: 2px solid white;
        background: linear-gradient(to right, #CC0000, #FF0000);
    }
    .external-player-btn {
        background: linear-gradient(to right, #FF0000, #CC0000);
        border: none;
        color: white;
        border-radius: 6px;
        padding: 10px 15px;
        font-weight: 700;
        cursor: pointer;
        text-decoration: none;
        width: 100%;
        text-align: center;
        font-family: 'Cairo', sans-serif;
        display: block;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    }

    .watch-btn:focus,
    .live-server-btn:focus,
    .load-btn:focus {
        outline: none;
    }

    .button-container-wrapper {
        max-width: 700px;
        margin: auto;
    }

    .button-container {
        display: flex;
        justify-content: center;
        gap: 0;
        margin: 20px 0;
        border-radius: 5px;
        overflow: hidden;
        background-color: #333;
        width: 100%;
    }

    .load-btn {
        font-family: 'Cairo', sans-serif;
        background-color: transparent;
        color: white;
        padding: 10px 20px;
        border: none;
        cursor: pointer;
        flex-grow: 1;
        font-weight: bold;
        transition: background-color 0.3s ease;
    }

    .load-btn:hover {
        background-color: rgba(255, 255, 255, 0.1);
    }

    .load-btn:first-child {
        border-radius: 5px 0 0 5px;
    }

    .load-btn:last-child {
        border-radius: 0 5px 5px 0;
    }

    .load-btn.active {
        background-color: #FF0000;
    }

    .search-refresh-container {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        margin-bottom: 20px;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
    }

    .search-box {
        display: flex;
        align-items: center;
        flex-grow: 1;
        padding: 10px;
        border-radius: 20px;
        background-color: #09034a;
        border: 1px solid white;
    }

    .search-box i {
        color: white;
        font-size: 16px;
        margin-left: 10px;
    }

    .search-input-field {
        flex-grow: 1;
        border: none;
        background: transparent;
        color: white;
        font-family: 'Cairo', sans-serif;
        font-size: 16px;
        text-align: right;
        min-width: 0;
    }

    .search-input-field:focus {
        outline: none;
    }

    .refresh-btn {
        padding: 10px 15px;
        border-radius: 5px;
        border: none;
        background: linear-gradient(to right, #100f8a, #09034a);
        color: white;
        font-family: 'Cairo', sans-serif;
        font-size: 16px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }
    .refresh-btn:focus {
        outline: 2px solid white;
    }

    .refresh-btn:hover {
        background-color: #555;
    }
    
    .error-message {
        text-align: center;
        color: white;
        font-size: 18px;
        margin-top: 20px;
    }
    
    .retry-btn {
        background-color: #555;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 6px;
        font-weight: bold;
        cursor: pointer;
        margin-top: 10px;
        display: block;
        width: fit-content;
        margin-left: auto;
        margin-right: auto;
        font-family: 'Cairo', sans-serif;
    }
    .retry-btn:focus {
        outline: 2px solid white;
        background-color: #777;
    }

    .external-player-modal-content {
        background-color: #1a1a1a;
        margin: 15% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 90%;
        max-width: 300px;
        border-radius: 10px;
        text-align: center;
        position: relative;
    }

    .external-player-modal-content .close-btn {
        top: 10px;
        right: 10px;
        left: unset;
    }

    .external-player-modal-content p {
        margin-bottom: 20px;
        font-size: 16px;
    }

    .modal-buttons-container {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        gap: 10px;
        width: 100%;
    }

    .download-player-btn {
        background-color: #4CAF50;
        color: white;
        padding: 10px 15px;
        border-radius: 6px;
        font-weight: 700;
        text-decoration: none;
        flex-grow: 1;
        text-align: center;
    }
    .download-player-btn:focus {
        outline: 2px solid white;
        background-color: #6cbf6f;
    }
    
    .watch-external-btn {
        background-color: red;
        color: white;
        padding: 10px 15px;
        border-radius: 6px;
        font-weight: 700;
        text-decoration: none;
        flex-grow: 1;
        text-align: center;
    }
    .watch-external-btn:focus {
        outline: 2px solid white;
        background-color: #ff3333;
    }
    

    #bottom-navbar {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 60px;
        background: linear-gradient(to top, #192842, #192842);
        display: flex;
        justify-content: space-around;
        align-items: center;
        border-top: none; 
        z-index: 200;
    }

    .nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        color: white;
        font-size: 10px;
        font-weight: 700;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    }
    .nav-item:focus {
        outline: 2px solid white;
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.1);
    }
    
    .nav-item img {
        width: 20px;
        height: 20px;
        margin-bottom: 4px;
    }

</style>
</head>
<body>

<script src="https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js"></script>

<div class="search-refresh-container">
    <button id="refresh-btn" class="refresh-btn" tabindex="0"><i class="fas fa-sync-alt"></i></button>
    <div class="search-box">
        <input type="text" id="search-input" class="search-input-field" placeholder="ابحث عن مباراة..." tabindex="0">
        <i class="fas fa-search"></i>
    </div>
</div>

<div id="loading" class="loading-spinner"></div>
<div id="progress-bar-container">
    <div id="progress-bar"></div>
</div>
<div id="matches-container" style="max-width:700px; margin:auto;"></div>

<div id="bottom-navbar">
    <a href="go:telegram" class="nav-item" tabindex="0">
        <img src="https://hussam9595.github.io/Pronews/telegram-brands-solid-full.svg" alt="جدول المباريات">
        <span>تلغرام</span>
    </a>
    <a href="go:youtube" class="nav-item" tabindex="0">
        <img src="https://hussam9595.github.io/Pronews/youtube-brands-solid-full.svg" alt="VOD">
        <span>يوتيوب</span>
    </a>
    <a href="go:HOME" class="nav-item" tabindex="0">
        <img src="https://hussam9595.github.io/Pronews/tv-solid-full.svg" alt="تلفاز">
        <span>تلفاز</span>
    </a>
    <a href="go:VOD" class="nav-item" tabindex="0">
        <img src="https://hussam9595.github.io/Pronews/circle-play-solid-full.svg" alt="يوتيوب">
        <span>VOD</span>
    </a>
    <a href="go:jdol" class="nav-item" tabindex="0">
        <img src="https://hussam9595.github.io/Pronews/calendar-days-solid-full.svg" alt="تلغرام">
        <span>جدول المباريات</span>
    </a>
</div>

<div id="liveServersModal" class="modal">
    <div class="modal-content">
        <span id="liveServersModalCloseBtn" class="close-btn" tabindex="0">×</span>
        <h2 class="modal-title"></h2>
        <ul id="liveServerList" class="server-list">
        </ul>
    </div>
</div>

<div id="externalPlayerModal" class="modal">
    <div class="external-player-modal-content">
        <span id="externalPlayerModalCloseBtn" class="close-btn" tabindex="0">×</span>
        <p>هذا السيرفر يحتاج لمشغل خارجي</p>
        <div class="modal-buttons-container">
            <a id="downloadPlayerBtn" class="download-player-btn" href="go:player" tabindex="0">تحميل المشغل</a>
            <a id="watchExternalBtn" class="watch-external-btn" href="#" tabindex="0">شاهد</a>
        </div>
    </div>
</div>

<script>
    const teamLogos = {
  "Saudi Pro League": {
    "الهلال": "https://upload.wikimedia.org/wikipedia/commons/thumb/5/55/Al_Hilal_SFC_Logo.svg/800px-Al_Hilal_SFC_Logo.svg.png",
    "النصر": "https://upload.wikimedia.org/wikipedia/ar/thumb/a/ac/Al_Nassr_FC_Logo.svg/1200px-Al_Nassr_FC_Logo.svg.png",
    "الاتحاد": "https://upload.wikimedia.org/wikipedia/en/thumb/8/87/Al-Ittihad_Club_%28Jeddah%29_logo.svg/1200px-Al-Ittihad_Club_%28Jeddah%29_logo.svg.png",
    "الأهلي السعودي": "https://static.wikia.nocookie.net/logopedia/images/d/d2/Al-ahli-sfc-2008-logo.png",
    "الشباب": "https://upload.wikimedia.org/wikipedia/en/thumb/2/2d/Al_Shabab_FC_%28Riyadh%29.svg/1200px-Al_Shabab_FC_%28Riyadh%29.svg.png",
    "التعاون": "https://upload.wikimedia.org/wikipedia/en/thumb/0/08/Al_Taawoun_FC_Logo.svg/1200px-Al_Taawoun_FC_Logo.svg.png",
    "الرياض": "https://upload.wikimedia.org/wikipedia/en/thumb/3/39/Al-Riyadh_SC.svg/1200px-Al_Riyadh_SC.svg.png",
    "الخليج": "https://upload.wikimedia.org/wikipedia/ar/thumb/3/32/Al-Khaleej_FC_Logo.svg/1200px-Al-Khaleej_FC_Logo.svg.png",
    "الفتح": "https://i.top4top.io/p_3530n9yvr1.png",
    "ضمك": "https://upload.wikimedia.org/wikipedia/ar/thumb/0/0b/Damac_FC.svg/250px-Damac_FC.svg.png",
    "الفيحاء": "https://e.top4top.io/p_3530yvi7t1.png",
    "الاتفاق": "https://upload.wikimedia.org/wikipedia/ar/thumb/3/3b/%D8%B4%D8%B9%D8%A7%D8%B1_%D9%86%D8%A7%D8%AF%D9%8A_%D8%A7%D9%84%D8%A7%D8%AA%D9%81%D8%A7%D9%82_2022.svg/1200px-%D8%B4%D8%B9%D8%A7%D8%B1_%D9%86%D8%A7%D8%AF%D9%8A_%D8%A7%D9%84%D8%A7%D8%AA%D9%81%D8%A7%D9%82_2022.svg.png",
    "الوحدة": "https://upload.wikimedia.org/wikipedia/ar/thumb/5/55/Al_Wehda_FC_Logo.svg/1200px-Al_Wehda_FC_Logo.svg.png",
    "الحزم": "https://upload.wikimedia.org/wikipedia/ar/9/91/%D8%B4%D8%B9%D8%A7%D8%B1_%D9%86%D8%A7%D8%AF%D9%8A_%D8%A7%D9%84%D8%AD%D8%B2%D9%85.svg",
    "الأخدود": "https://l.top4top.io/p_35305d2gf1.png",
    "نيوم": "https://upload.wikimedia.org/wikipedia/ar/2/2b/Neom-Logo.png",
    "النجمة": "https://a.top4top.io/p_35304ootf1.png",
    "القادسية": "https://b.top4top.io/p_3530wi2le1.png"
  },
  "Egyptian Premier League": {
    "الأهلي": "https://static.wikia.nocookie.net/logopedia/images/5/5d/Al_Ahly_SC_logo.svg.png",
    "الزمالك": "https://static.wikia.nocookie.net/logopedia/images/7/7f/180px-ZamalekSC.png",
    "الاتحاد السكندري": "https://upload.wikimedia.org/wikipedia/ar/f/f1/%D8%B4%D8%B9%D8%A7%D8%B1_%D8%A7%D9%84%D8%A7%D8%AA%D8%AD%D8%A7%D8%AF_%D8%A7%D9%84%D8%B3%D9%83%D9%86%D8%AF%D8%B1%D9%8A.png",
    "طلائع الجيش": "https://k.top4top.io/p_3528ico9q1.png",
    "البنك الأهلي": "https://upload.wikimedia.org/wikipedia/ar/thumb/c/ca/NBE_SC.png/250px-NBE_SC.png",
    "إنبي": "https://upload.wikimedia.org/wikipedia/ar/b/ba/Enppi.png",
    "المقاولون العرب": "https://upload.wikimedia.org/wikipedia/ar/c/ca/ArabContrectorsFC.png",
    "سيراميكا كليوباترا": "https://b.top4top.io/p_3528xx3ke1.png",
    "مودرن سبورت": "https://upload.wikimedia.org/wikipedia/ar/3/31/%D9%86%D8%A7%D8%AF%D9%8A_%D9%85%D9%88%D8%AF%D8%B1%D9%86_%D8%B3%D8%A8%D9%88%D8%B1%D8%AA.png",
    "بيراميدز": "https://upload.wikimedia.org/wikipedia/ar/3/3f/Pyramids_F.C_%282018%29.png",
    "المصري البورسعيدي": "https://upload.wikimedia.org/wikipedia/ar/6/61/Masry.png",
    "سموحة": "https://upload.wikimedia.org/wikipedia/ar/3/3f/Smouha_SC_logo.png",
    "فاركو": "https://upload.wikimedia.org/wikipedia/ar/thumb/f/ff/Pharco_FC.png/250px-Pharco_FC.png",
    "بتروجيت": "https://upload.wikimedia.org/wikipedia/ar/archive/3/33/20231126083353%21Petrojet-Club-Logo.png",
    "زد إف سي": "https://i.top4top.io/p_35296s4551.png",
    "الإسماعيلي": "https://a.top4top.io/p_3529pzjbk1.png",
    "غزل المحلة": "https://f.top4top.io/p_35308cux71.png",
    "حرس الحدود": "https://upload.wikimedia.org/wikipedia/ar/a/a7/Haras_El_Hodoud_logo_2018.png",
    "الجونة": "https://upload.wikimedia.org/wikipedia/commons/b/b0/El_Gouna_FC_Logo.png",
    "وادي دجلة": "https://upload.wikimedia.org/wikipedia/ar/0/08/Wadi_Degla_Logo.png",
    "كهرباء الإسماعيلية": "https://d.top4top.io/p_3530xzuhh1.png"
  },
  "La Liga": {
    "ريال مدريد": "https://upload.wikimedia.org/wikipedia/sco/5/56/Real_Madrid_CF.svg",
    "برشلونة": "https://upload.wikimedia.org/wikipedia/sco/4/47/FC_Barcelona_%28crest%29.svg",
    "جيرونا": "https://upload.wikimedia.org/wikipedia/ar/b/b7/Girona_FC_%282022%29.svg",
    "أتليتكو مدريد": "https://upload.wikimedia.org/wikipedia/ar/f/f4/Atletico_Madrid_2017_logo.svg",
    "فالنسيا": "https://upload.wikimedia.org/wikipedia/ar/d/d3/Valencia_CF.svg",
    "فياريال": "https://upload.wikimedia.org/wikipedia/ar/7/70/Villarreal_CF_logo.svg",
    "أشبيلية": "https://static.wikia.nocookie.net/logopedia/images/1/1d/Sevilla.png",
    "ريال سوسيداد": "https://static.wikia.nocookie.net/logopedia/images/3/33/Real_Sociedad.png",
    "ليفانتي": "https://static.wikia.nocookie.net/logopedia/images/d/d4/Levante.png",
    "ريال مايوركا": "https://upload.wikimedia.org/wikipedia/ar/thumb/e/e4/RCD_Mallorca.svg/1200px-RCD_Mallorca.svg.png",
    "سيلتا دي فيغو": "https://static.wikia.nocookie.net/logopedia/images/3/3d/Celta_de_Vigo.png",
    "أتلتيكو مدريد": "https://upload.wikimedia.org/wikipedia/ar/thumb/3/33/%D8%B4%D8%B9%D8%A7%D8%B1_%D8%A3%D8%AA%D9%84%D8%AA%D9%8A%D9%83%D9%88_%D9%85%D8%AF%D8%B1%D9%8A%D8%AF_%282024%29.svg/1200px-%D8%B4%D8%B9%D8%A7%D8%B1_%D8%A3%D8%AA%D9%84%D8%AA%D9%8A%D9%83%D9%88_%D9%85%D8%AF%D8%B1%D9%8A%D8%AF_%282024%29.svg.png",
    "إلتشي": "https://static.wikia.nocookie.net/logopedia/images/8/82/Elche.png",
    "أوساسونا": "https://static.wikia.nocookie.net/logopedia/images/1/1e/Osasuna.png",
    "ريال سوسييداد": "https://static.wikia.nocookie.net/logopedia/images/3/33/Real_Sociedad.png",
    "ريال بيتيس": "https://static.wikia.nocookie.net/logopedia/images/8/88/Real_Betis_2022.svg",
    "أتلتيك بيلباو": "https://static.wikia.nocookie.net/logopedia/images/e/ea/Athletic_Club.png",
    "خيتافي": "https://static.wikia.nocookie.net/logopedia/images/e/ea/Getafe.png",
    "ديبورتيفو ألافيس": "https://static.wikia.nocookie.net/logopedia/images/2/29/Deportivo_Alaves_2020.png",
    "ألميريا": "https://upload.wikimedia.org/wikipedia/en/thumb/4/4a/UD_Almeria_logo.svg/887px-UD_Almeria_logo.svg.png",
    "غرناطة": "https://static.wikia.nocookie.net/logopedia/images/d/d4/Granada_CF_2023.png",
    "رايو فايكانو": "https://static.wikia.nocookie.net/logopedia/images/f/f8/Rayo_Vallecano.png",
    "لاس بالماس": "https://upload.wikimedia.org/wikipedia/ar/thumb/c/c2/UD_Las_Palmas.svg/1200px-UD_Las_Palmas.svg.png",
    "قادش": "https://static.wikia.nocookie.net/logopedia/images/c/c1/Cadizcf2009.png",
    "إسبانيول": "https://static.wikia.nocookie.net/logopedia/images/9/94/RCD_Espanyol_logo.svg",
    "ريال أوفييدو": "https://static.wikia.nocookie.net/logopedia/images/8/89/Real_Oviedo.png"
  },
  "Premier League": {
    "ليفربول": "https://upload.wikimedia.org/wikipedia/en/thumb/0/0c/Liverpool_FC.svg/1200px-Liverpool_FC.svg.png",
    "مانشستر سيتي": "https://static.wikia.nocookie.net/logopedia/images/6/61/Manchester_City_2016.svg",
    "تشيلسي": "https://static.wikia.nocookie.net/logopedia/images/e/e2/Chelsea_FC_logo.svg",
    "مانشستر يونايتد": "https://static.wikia.nocookie.net/logopedia/images/1/1c/Manchester_United_FC_logo.svg",
    "توتنهام هوتسبير": "https://www.vectorkhazana.com/assets/images/products/Tottenham_Hotspur_Fc.png",
    "نيوكاسل يونايتد": "https://static.wikia.nocookie.net/logopedia/images/b/b8/Newcastle_United_FC_logo.svg",
    "ليستر سيتي": "https://static.wikia.nocookie.net/logopedia/images/a/a4/Leicester_City_FC_logo.png",
    "آرسنال": "https://static.wikia.nocookie.net/logopedia/images/1/1a/Arsenal_FC_logo.svg",
    "آستون فيلا": "https://static.wikia.nocookie.net/logopedia/images/d/d2/Aston_Villa_FC_logo.svg",
    "برينتفورد": "https://static.wikia.nocookie.net/logopedia/images/c/c9/Brentford_FC_logo.svg",
    "بورنموث": "https://upload.wikimedia.org/wikipedia/ar/e/e5/AFC_Bournemouth_%282013%29.svg",
    "كريستال بالاس": "https://static.wikia.nocookie.net/logopedia/images/0/0c/Crystal_Palace_FC_logo.svg",
    "ايفرتون": "https://static.wikia.nocookie.net/logopedia/images/7/7c/Everton_FC_logo.svg",
    "فولهام": "https://static.wikia.nocookie.net/logopedia/images/d/db/Fulham_FC_logo.svg",
    "نوتنغهام فوريست": "https://static.wikia.nocookie.com/logopedia/images/b/bb/Nottingham_Forest_FC_logo.svg",
    "شيفيلد يونايتد": "https://static.wikia.nocookie.net/logopedia/images/9/9c/Sheffield_United_FC_logo.svg",
    "ويستهام يونايتد": "https://static.wikia.nocookie.net/logopedia/images/c/c2/West_Ham_United_FC_logo.svg",
    "ولفرهامبتون": "https://static.wikia.nocookie.net/logopedia/images/d/d5/Wolverhampton_Wanderers_FC_logo.svg",
    "برايتون أند هوف ألبيون": "https://static.wikia.nocookie.net/logopedia/images/d/dd/Brighton_%26_Hove_Albion_2011.svg",
    "أستون فيلا": "https://static.wikia.nocookie.net/logopedia/images/d/d6/Aston_Villa_2024.svg",
    "برايتون": "https://static.wikia.nocookie.net/logopedia/images/d/dd/Brighton_%26_Hove_Albion_2011.svg",
    "وولفرهامبتون": "https://static.wikia.nocookie.net/logopedia/images/d/d5/Wolverhampton_Wanderers_FC_logo.svg",
    "نوتينغهام فورست": "https://static.wikia.nocookie.net/logopedia/images/8/8f/Nottingham_Forest.svg",
    "إيفرتون": "https://static.wikia.nocookie.net/logopedia/images/f/fe/Everton_FC_logo_%282021%29.svg",
    "ليدز يونايتد": "https://static.wikia.nocookie.net/logopedia/images/5/5e/Leeds_United_AFC_logo.svg",
    "ساوثهامبتون": "https://static.wikia.nocookie.net/logopedia/images/2/2b/Southampton_FC_logo.svg",
    "بيرنلي": "https://static.wikia.nocookie.net/logopedia/images/a/a2/Burnley_FC_Logo.svg.png",
    "سندرلاند": "https://static.wikia.nocookie.net/logopedia/images/8/84/Sunderland_AFC_logo.svg",
    "وست هام يونايتد": "https://static.wikia.nocookie.net/logopedia/images/c/c2/West_Ham_United_FC_logo.svg"
  },
  "Ligue 1": {
    "مارسيليا": "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d8/Olympique_Marseille_logo.svg/1582px-Olympique_Marseille_logo.svg.png",
    "باريس": "https://upload.wikimedia.org/wikipedia/ar/thumb/4/4c/Paris_FC.svg/1200px-Paris_FC.svg.png",
    "نيس": "https://upload.wikimedia.org/wikipedia/ar/thumb/d/d2/OGC_Nice.svg/1200px-OGC_Nice.svg.png",
    "أولمبيك ليون": "https://static.wikia.nocookie.net/logopedia/images/a/a6/Olympique_Lyonnais_2022.svg",
    "باريس سان جيرمان": "https://static.wikia.nocookie.net/logopedia/images/e/ee/Paris_Saint-Germain_%282013%29.svg",
    "ليل": "https://static.wikia.nocookie.net/logopedia/images/c/c1/Lille_OSC_2018.png",
    "ليون": "https://static.wikia.nocookie.net/logopedia/images/a/a6/Olympique_Lyonnais_2022.svg",
    "لانس": "https://static.wikia.nocookie.net/logopedia/images/c/c0/Racing_club_de_Lens.png/revision/latest?cb=20180821153531",
    "ستراسبورغ": "https://upload.wikimedia.org/wikipedia/ar/7/7b/Racing_Club_de_Strasbourg_Alsace_logo_2016.png",
    "تولوز": "https://static.wikia.nocookie.net/logopedia/images/3/35/Toulouse_FC_logo_%28introduced_2018%29.svg",
    "مرسيليا": "https://static.wikia.nocookie.net/logopedia/images/8/88/Olympique_de_Marseille_logo.svg",
    "موناكو": "https://static.wikia.nocookie.net/logopedia/images/5/59/AS_Monaco_FC_%28since_2021%29.png",
    "أنجيه": "https://static.wikia.nocookie.net/logopedia/images/7/76/Angers_SCO_Crest_2021.png",
    "نانت": "https://static.wikia.nocookie.net/logopedia/images/6/6f/FC_Nantes_2019_2.png",
    "أوكسير": "https://static.wikia.nocookie.net/logopedia/images/6/63/AJ_Auxerre_logo.svg",
    "لوريان": "https://static.wikia.nocookie.net/logopedia/images/4/4c/FC_Lorient_logo.svg",
    "رين": "https://static.wikia.nocookie.net/logopedia/images/3/32/Stade-Rennais.png",
    "ستاد بريست": "https://static.wikia.nocookie.net/logopedia/images/0/05/Stade_Brestois_29_logo.svg",
    "ستاد رين": "https://static.wikia.nocookie.net/logopedia/images/3/32/Stade-Rennais.png",
    "لوهافر": "https://static.wikia.nocookie.net/logopedia/images/f/f2/Havre_AC_logo.svg",
    "ميتز": "https://static.wikia.nocookie.net/logopedia/images/f/f2/FC_Metz_2021.svg",
    "تروا": "https://static.wikia.nocookie.net/logopedia/images/f/f2/FC_Metz_2021.svg"
  },
  "Serie A": {
    "روما": "https://upload.wikimedia.org/wikipedia/ar/thumb/5/52/AS_Roma_logo_%282013%29.svg/556px-AS_Roma_logo_%282013%29.svg.png",
    "إنتر ميلان": "https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/FC_Internazionale_Milano_2021.svg/1024px-FC_Internazionale_Milano_2021.svg.png",
    "ميلان": "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d0/Logo_of_AC_Milan.svg/1306px-Logo_of_AC_Milan.svg.png",
    "نابولي": "https://static.wikia.nocookie.net/logopedia/images/0/08/Napolistemma.png",
    "ساسولو": "https://static.wikia.nocookie.net/logopedia/images/e/e1/Sassuolo.png",
    "جنوى": "https://static.wikia.nocookie.net/logopedia/images/a/ab/Genoa_CFC_logo_%282022%29.svg",
    "ليتشي": "https://static.wikia.nocookie.net/logopedia/images/1/14/600px-Leccestemma.png",
    "كومو": "https://static.wikia.nocookie.net/logopedia/images/6/64/Como_1907_logo_%282019%29.svg",
    "لاتسيو": "https://upload.wikimedia.org/wikipedia/en/thumb/c/ce/S.S._Lazio_badge.svg/1200px-S.S._Lazio_badge.svg.png",
    "أتالانتا": "https://upload.wikimedia.org/wikipedia/en/6/66/AtalantaBC.svg",
    "يوفنتوس": "https://i.top4top.io/p_3530mkhea1.png",
    "فيورنتينا": "https://static.wikia.nocookie.net/logopedia/images/d/d4/ACF_Fiorentina_2022.svg",
    "بولونيا": "https://static.wikia.nocookie.net/logopedia/images/7/7c/Logobologna2018.png",
    "تورينو": "https://static.wikia.nocookie.net/logopedia/images/0/04/Torino_FC_logo.svg",
    "أودينيزي": "https://static.wikia.nocookie.net/logopedia/images/8/86/Udinese%403.-other-logo.png",
    "هيلاس فيرونا": "https://static.wikia.nocookie.net/logopedia/images/0/02/Logo_Hellas_Verona_FC_2020.png",
    "كالياري": "https://static.wikia.nocookie.net/logopedia/images/a/a2/Cagliari_Calcio_logo_%28since_2015%29.svg",
    "بيزا": "https://static.wikia.nocookie.net/logopedia/images/2/25/Pisa_Sporting_Club_logo.svg",
    "بارما": "https://static.wikia.nocookie.net/logopedia/images/a/a0/Parma_Calcio_logo.png",
    "كريمونيسي": "https://static.wikia.nocookie.net/logopedia/images/e/e1/US_Cremonese_logo.svg"
  },
  "International Friendly": {
    "الجزائر": "https://d.top4top.io/p_35227a4i72.png",
    "السودان": "https://c.top4top.io/p_3522q73t81.png"
  },
  "Bundesliga": {
    "هامبورغ": "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f7/Hamburger_SV_logo.svg/1200px-Hamburger_SV_logo.svg.png",
    "سانت باولي": "https://upload.wikimedia.org/wikipedia/ar/thumb/8/8f/FC_St._Pauli_logo_%282018%29.svg/1200px-FC_St._Pauli_logo_%282018%29.svg.png"
  },
  "Qatar Stars League": {
    "السد": "https://c.top4top.io/p_3531d5y3i1.png",
    "الدحيل": "https://static.wikia.nocookie.net/winningelevenspyroedition/images/0/08/Al-Duhail_SC.png",
    "العربي": "https://upload.wikimedia.org/wikipedia/en/thumb/2/22/Al-Arabi_SC_Qatar_logo.svg/1200px-Al-Arabi_SC_Qatar_logo.svg.png",
    "الريان": "https://upload.wikimedia.org/wikipedia/en/thumb/8/80/Al-Rayyan_SC_logo.svg/1200px-Al-Rayyan_SC_logo.svg.png",
    "الغرافة": "https://upload.wikimedia.org/wikipedia/de/c/c0/Gharrafa.png",
    "أم صلال": "https://upload.wikimedia.org/wikipedia/en/thumb/0/04/Umm_Salal_SC_logo.svg/1200px-Umm_Salal_SC_logo.svg.png",
    "الأهلي": "https://upload.wikimedia.org/wikipedia/en/3/39/Al_Ahli_SC_logo.svg",
    "المرخية": "https://upload.wikimedia.org/wikipedia/en/thumb/7/70/Al-Markhiya_SC_logo.svg/1200px-Al-Markhiya_SC_logo.svg.png",
    "الخور": "https://upload.wikimedia.org/wikipedia/en/thumb/2/2b/Al-Khor_SC_logo.svg/1200px-Al-Khor_SC_logo.svg.png",
    "الشمال": "https://upload.wikimedia.org/wikipedia/en/thumb/8/8f/Al-Shamal_SC_logo.svg/1200px-Al-Shamal_SC_logo.svg.png",
    "قطر": "https://qsl.qa/sites/default/files/2025-07/QSC-emblem-insta-1752563177.png",
    "الوكرة": "https://upload.wikimedia.org/wikipedia/en/2/26/Al-Wakrah_SC_logo.svg",
    "الشحانية": "https://www.nicepng.com/png/detail/197-1977009_free-png-al-shahania-sc-football-logo-png.png",
    "السيلية": "https://d.top4top.io/p_35313tzgh1.png"
  },
  "UAE Pro League": {
    "العين": "https://upload.wikimedia.org/wikipedia/en/6/62/Al_Ain_FC_logo_2024.png",
    "شباب الأهلي": "https://upload.wikimedia.org/wikipedia/en/thumb/0/02/Shabab_Al_Ahli_logo.svg/1141px-Shabab_Al_Ahli_logo.svg.png",
    "الوصل": "https://e.top4top.io/p_3531au0go1.png",
    "الوحدة": "https://upload.wikimedia.org/wikipedia/en/thumb/e/ef/Al_Wahda_FC_logo.svg/926px-Al_Wahda_FC_logo.svg.png",
    "الشارقة": "https://a.top4top.io/p_3531kxhha1.png",
    "عجمان": "https://imagecache.365scores.com/image/upload/f_png,w_250,h_250,c_limit,q_auto:eco,d_Competitors:default1.png/v2/Competitors/8652",
    "كلباء": "https://www.shababalahli.ae/wp-content/uploads/2024/10/kalba-new-logo-8-1.png",
    "الجزيرة": "https://upload.wikimedia.org/wikipedia/en/thumb/f/ff/Al_Jazira_Club_logo_en_%282021%29.svg/1200px-Al_Jazira_Club_logo_en_%282021%29.svg.png",
    "النصر": "https://h.top4top.io/p_3531pwqsd1.png",
    "خورفكان": "https://i.top4top.io/p_3531nblrn1.png",
    "البطائح": "https://upload.wikimedia.org/wikipedia/ar/3/3a/%D8%B4%D8%B9%D8%A7%D8%B1_%D9%86%D8%A7%D8%AF%D9%8A_%D8%A7%D9%84%D8%A8%D8%B7%D8%A7%D8%A6%D8%AD.png",
    "الظفرة": "https://upload.wikimedia.org/wikipedia/commons/a/a5/%D8%B4%D8%B9%D8%A7%D8%B1_%D9%86%D8%A7%D8%AF%D9%8A_%D8%A7%D9%84%D8%B8%D9%81%D8%B1%D8%A9_%D8%A7%D9%84%D8%B1%D9%8A%D8%A7%D8%B6%D9%8A_%D8%A7%D9%84%D8%AB%D9%82%D8%A7%D9%81%D9%8A.png",
    "دبا": "https://upload.wikimedia.org/wikipedia/en/thumb/b/be/Dibba_club_logo.png/180px-Dibba_club_logo.png",
    "بني ياس": "https://upload.wikimedia.org/wikipedia/ar/thumb/8/86/Baniyas_SCC.svg/1200px-Baniyas_SCC.svg.png"
  },
  "Gulf cup": {
    "العراق": "https://cdn.countryflags.com/thumbs/iraq/flag-round-500.png",
    "مصر": "https://cdn.countryflags.com/thumbs/egypt/flag-round-250.png",
    "السعودية": "https://cdn.countryflags.com/thumbs/saudi-arabia/flag-round-250.png",
    "اليمن": "https://vectorflags.s3.amazonaws.com/flags/ye-circle-01.png",
    "عمان": "https://cdn.countryflags.com/thumbs/oman/flag-round-250.png"
  },
  "Cupa": {
    "البرازيل": "https://upload.wikimedia.org/wikipedia/commons/thumb/4/4a/Brazilian_flag_icon_round.svg/2048px-Brazilian_flag_icon_round.svg.png",
    "تشيلي": "https://cdn.countryflags.com/thumbs/chile/flag-round-250.png",
    "الأرجنتين": "https://cdn.countryflags.com/thumbs/argentina/flag-round-250.png",
    "فنزويلا": "https://vectorflags.s3.amazonaws.com/flags/ve-circle-01.png",
    "باراغواي": "https://cdn.countryflags.com/thumbs/paraguay/flag-round-250.png",
    "الإكوادور": "https://cdn.countryflags.com/thumbs/ecuador/flag-round-250.png",
    "أوروغواي": "https://cdn.countryflags.com/thumbs/uruguay/flag-round-250.png",
    "بيرو": "https://static.vecteezy.com/system/resources/previews/015/272/122/non_2x/peru-3d-rounded-flag-with-transparent-background-free-png.png",
    "كولومبيا": "https://vectorflags.s3.amazonaws.com/flags/co-circle-01.png",
    "بوليفيا": "https://vectorflags.s3.amazonaws.com/flags/bo-sphere-01.png"
  },
  "Euro championships": {
    "فرنسا": "https://cdn.countryflags.com/thumbs/france/flag-round-250.png",
    "إيطاليا": "https://cdn.countryflags.com/thumbs/italy/flag-round-250.png",
    "إستونيا": "https://vectorflags.s3.amazonaws.com/flags/ee-circle-01.png",
    "أوكرانيا": "https://cdn-icons-png.flaticon.com/512/197/197572.png",
    "إنجلترا": "https://cdn.countryflags.com/thumbs/england/flag-round-250.png"
  },
  "African championships": {
    "إثيوبيا": "https://vectorflags.s3.amazonaws.com/flags/et-circle-01.png",
    "مصر": "https://cdn.countryflags.com/thumbs/egypt/flag-round-250.png",
    "السودان": "https://cdn.countryflags.com/thumbs/sudan/flag-round-250.png",
    "السنغال": "https://static.vecteezy.com/system/resources/previews/011/571/425/non_2x/circle-flag-of-senegal-free-png.png"
  },
  "Asian championships": {
    "العراق": "https://cdn.countryflags.com/thumbs/iraq/flag-round-500.png",
    "تايلند": "https://cdn.countryflags.com/thumbs/thailand/flag-round-250.png",
    "عمان": "https://cdn.countryflags.com/thumbs/oman/flag-round-250.png",
    "كمبوديا": "https://vectorflags.s3.amazonaws.com/flags/kh-circle-01.png",
    "تركمانستان": "https://cdn.countryflags.com/thumbs/turkmenistan/flag-round-250.png"
  }
};
    
    // تم استبدال matchLinks بـ leagueLinks لربط السيرفرات بالبطولات
    const leagueLinks = {
        "Saudi Pro League": [
            { "name": "ثمانية", "url": "go:8", "serverType": "internal" }
        ],
        "Premier League": [
            { "name": "BEIN SPORTS", "url": "go:BEIN", "serverType": "internal" }
        ],
        "La Liga": [
            { "name": "BEIN SPORTS", "url": "go:BEIN", "serverType": "internal" }
        ],
        "Egyptian Premier League": [
            { "name": "ON SPORT", "url": "go:ARAB", "serverType": "internal" }
        ],
        "Serie A": [
            { "name": "STARZPLAY SPORT", "url": "go:Adsport", "serverType": "internal" }
        ],
        "International Friendly": [
            { "name": "BEIN SPORTS", "url": "go:BEIN", "serverType": "internal" }
        ],
        "Ligue 1": [
            { "name": "BEIN SPORTS", "url": "go:BEIN", "serverType": "internal" }
        ],
        "Cupa": [
            { "name": "SSC", "url": "go:SSC", "serverType": "internal" }
        ],
        "Gulf cup": [
            { "name": "ALKASS", "url": "go:ARAB", "serverType": "internal" }
        ],
        "Asian championships": [
            { "name": "ALRABIAA", "url": "go:RABIAA", "serverType": "internal" }
        ],
        "African championships": [
            { "name": "BEIN SPORTS", "url": "go:BEIN", "serverType": "internal" }
        ],
        "Euro championships": [
            { "name": "BEIN SPORTS", "url": "go:BEIN", "serverType": "internal" }
        ],
        // يمكنك إضافة المزيد من البطولات والسيرفرات هنا
    };

    const leagues = {
  "Egyptian Premier League": [
    "الأهلي",
    "الزمالك",
    "بيراميدز",
    "مودرن سبورت",
    "إنبي",
    "المصري البورسعيدي",
    "الاتحاد السكندري",
    "المقاولون العرب",
    "سيراميكا كليوباترا",
    "طلائع الجيش",
    "سموحة",
    "فاركو",
    "البنك الأهلي",
    "بتروجيت",
    "الإسماعيلي",
    "زد إف سي",
    "غزل المحلة",
    "حرس الحدود",
    "الجونة",
    "وادي دجلة",
    "كهرباء الإسماعيلية"
  ],
  "Saudi Pro League": [
    "الهلال",
    "النصر",
    "الاتحاد",
    "الأهلي السعودي",
    "الشباب",
    "التعاون",
    "الفتح",
    "ضمك",
    "الفيحاء",
    "الخليج",
    "الاتفاق",
    "الوحدة",
    "الحزم",
    "الأخدود",
    "الرياض",
    "الأخدود",
    "الحزم",
    "نيوم",
    "النجمة",
    "القادسية"
  ],
  "La Liga": [
    "ريال مدريد",
    "برشلونة",
    "جيرونا",
    "أتلتيكو مدريد",
    "أشبيلية",
    "ريال سوسييداد",
    "ريال بيتيس",
    "فياريال",
    "أتلتيك بيلباو",
    "فالنسيا",
    "أوساسونا",
    "ريال مايوركا",
    "سيلتا دي فيغو",
    "قادش",
    "لاس بالماس",
    "غرناطة",
    "ديبورتيفو ألافيس",
    "خيتافي",
    "ألميريا",
    "رايو فايكانو",
    "إسبانيول",
    "إلتشي",
    "ريال أوفييدو",
    "ليفانتي"
  ],
  "Premier League": [
    "مانشستر سيتي",
    "آرسنال",
    "مانشستر يونايتد",
    "نيوكاسل يونايتد",
    "ليفربول",
    "توتنهام هوتسبير",
    "أستون فيلا",
    "برايتون أند هوف ألبيون",
    "برينتفورد",
    "فولهام",
    "كريستال بالاس",
    "تشيلسي",
    "وولفرهامبتون",
    "وست هام يونايتد",
    "بورنموث",
    "نوتينغهام فورست",
    "إيفرتون",
    "ليدز يونايتد",
    "ليستر سيتي",
    "ساوثهامبتون",
    "بيرنلي",
    "سندرلاند"
  ],
  "Serie A": [
    "نابولي",
    "لاتسيو",
    "إنتر ميلان",
    "ميلان",
    "أتالانتا",
    "روما",
    "يوفنتوس",
    "فيورنتينا",
    "بولونيا",
    "تورينو",
    "بارما",
    "ساسولو",
    "أودينيزي",
    "هيلاس فيرونا",
    "جنوى",
    "كالياري",
    "ليتشي",
    "بيزا",
    "كريمونيسي",
    "كومو"
  ],
  "Ligue 1": [
    "باريس سان جيرمان",
    "ستراسبورغ",
    "مارسيليا",
    "لانس",
    "ليل",
    "ستاد رين",
    "أولمبيك ليون",
    "موناكو",
    "نيس",
    "ميتز",
    "لوريان",
    "أوكسير",
    "تولوز",
    "ستراسبورغ",
    "نانت",
    "ستاد بريست",
    "لوهافر",
    "أوكسير",
    "تروا",
    "أنجيه",
    "باريس",
    "ميتز"
  ],
  "Qatar Stars League": [
    "السد",
    "الدحيل",
    "العربي",
    "الريان",
    "الغرافة",
    "الأهلي",
    "أم صلال",
    "المرخية",
    "الخور",
    "الشمال",
    "قطر",
    "الوكرة",
    "الشحانية",
    "السيلية"
  ],
  "UAE Pro League": [
    "شباب الأهلي",
    "العين",
    "الوصل",
    "الوحدة",
    "الشارقة",
    "عجمان",
    "كلباء",
    "الجزيرة",
    "النصر",
    "الظفرة",
    "خورفكان",
    "بني ياس",
    "دبا",
    "البطائح"
  ],
  "Gulf cup": [
    "العراق",
    "مصر",
    "السعودية",
    "اليمن",
    "عمان"
  ],
  "Cupa": [
    "البرازيل",
    "تشيلي",
    "الأرجنتين",
    "فنزويلا",
    "باراغواي",
    "الإكوادور",
    "أوروغواي",
    "بيرو",
    "كولومبيا",
    "بوليفيا"
  ],
  "Euro championships": [
    "فرنسا",
    "إيطاليا",
    "إستونيا",
    "أوكرانيا",
    "إنجلترا",
    "إسبانيا",
    "المانيا",
    "البرتغال"
  ],
  "African championships": [
    "إثيوبيا",
    "مصر",
    "السودان",
    "السنغال"
  ],
  "Asian championships": [
    "العراق",
    "تايلند",
    "عمان",
    "كمبوديا",
    "تركمانستان"
  ]
};
    
    const matchesContainer = document.getElementById('matches-container');
    const loadingSpinner = document.getElementById('loading');
    const progressBarContainer = document.getElementById('progress-bar-container');
    const progressBar = document.getElementById('progress-bar');
    const liveServersModal = document.getElementById('liveServersModal');
    const liveServersModalCloseBtn = document.getElementById('liveServersModalCloseBtn');
    const liveServerList = document.getElementById('liveServerList');
    const searchInput = document.getElementById('search-input');
    const refreshBtn = document.getElementById('refresh-btn');
    let allMatches = [];
    let progressInterval;

    const externalPlayerModal = document.getElementById('externalPlayerModal');
    const externalPlayerModalCloseBtn = document.getElementById('externalPlayerModalCloseBtn');
    const watchExternalBtn = document.getElementById('watchExternalBtn');

    // تم تعديل الوظيفة لاستقبال اسم البطولة
    function renderLiveServers(leagueName) {
        liveServerList.innerHTML = '';
        const matchingServerLinks = leagueLinks[leagueName] || [];

        if (matchingServerLinks.length === 0) {
            liveServerList.innerHTML = '<p style="text-align: center;">لا يوجد سيرفرات متاحة لهذه المباراة حاليًا.</p>';
            return;
        }

        matchingServerLinks.forEach((linkData, index) => {
            const li = document.createElement('li');
            li.className = 'server-item';
            
            const liveBtn = document.createElement('a');
            liveBtn.className = 'live-server-btn';
            liveBtn.textContent = linkData.name;
            liveBtn.tabIndex = 0; // Make server buttons focusable
            
            if (linkData.serverType === "external") {
                liveBtn.onclick = (e) => {
                    e.preventDefault();
                    watchExternalBtn.href = linkData.url;
                    liveServersModal.style.display = 'none';
                    externalPlayerModal.style.display = 'block';
                    setTimeout(() => externalPlayerModal.querySelector('.download-player-btn').focus(), 100);
                };
            } else {
                liveBtn.href = linkData.url;
                liveBtn.target = '_blank';
            }
            
            li.appendChild(liveBtn);
            liveServerList.appendChild(li);
        });
        setTimeout(() => {
            const firstServerBtn = liveServersModal.querySelector('.live-server-btn');
            if (firstServerBtn) {
                firstServerBtn.focus();
            }
        }, 100);
    }

    function loadMatches(url) {
        const proxyUrl = 'https://api.allorigins.win/get?url=' + encodeURIComponent(url);
        matchesContainer.innerHTML = '';
        
        loadingSpinner.style.display = 'block';
        progressBarContainer.style.display = 'block';
        progressBar.style.width = '0%';
        
        let progress = 0;
        clearInterval(progressInterval);
        progressInterval = setInterval(() => {
            if (progress < 95) {
                progress += Math.floor(Math.random() * 5) + 1;
                progressBar.style.width = `${progress}%`;
            } else {
                clearInterval(progressInterval);
            }
        }, 300);

        fetch(proxyUrl)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                const html = data.contents;
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                const allMatchesFromSource = doc.querySelectorAll('li.single_match');
                
                // ** فلترة المباريات بناءً على الدوريات والمنتخبات المحددة **
                const desiredLeagues = ["Premier League", "La Liga", "Egyptian Premier League", "Saudi Pro League", "Ligue 1", "Serie A", "Qatar Stars League", "UAE Pro League"];
                const desiredTeams = ["إيطاليا","فرنسا","إسبانيا","المانيا","إنجلترا","البرتغال","العراق", "مصر", "السعودية", "الجزائر", "البرازيل", "الأرجنتين", "عمان", "اليمن"];

                const filteredMatches = [];
                allMatchesFromSource.forEach(match => {
                    const homeTeam = match.querySelector('.team.hometeam .the_team')?.innerText.trim() || '';
                    const awayTeam = match.querySelector('.team.awayteam .the_team')?.innerText.trim() || '';
                    const leagueName = findLeagueName(homeTeam, awayTeam);

                    const isDesiredLeague = desiredLeagues.includes(leagueName);
                    const isDesiredTeam = desiredTeams.includes(homeTeam) || desiredTeams.includes(awayTeam);
                    
                    if (isDesiredLeague || isDesiredTeam) {
                        filteredMatches.push(match);
                    }
                });

                allMatches = filteredMatches;

                clearInterval(progressInterval);
                progressBar.style.width = '100%';
                
                setTimeout(() => {
                    loadingSpinner.style.display = 'none';
                    progressBarContainer.style.display = 'none';
                }, 500);
                
                if (allMatches.length === 0) {
                     showErrorScreen("لم يتم العثور على مباريات اليوم من الدوريات والمنتخبات التي اخترتها.");
                     return;
                }
                renderMatches(allMatches);
            })
            .catch(err => {
                console.error(err);
                clearInterval(progressInterval);
                loadingSpinner.style.display = 'none';
                progressBarContainer.style.display = 'none';
                showErrorScreen("فشل في تحميل المباريات. يرجى التحقق من اتصالك بالإنترنت.");
            });
    }

    function showErrorScreen(message) {
        matchesContainer.innerHTML = `
            <div class="error-message">
                <p>${message}</p>
                <button class="retry-btn" id="retry-btn" tabindex="0">أعد المحاولة</button>
            </div>
        `;
        document.getElementById('retry-btn').addEventListener('click', () => {
            loadMatches('https://jdwel.com/today/');
        });
        setTimeout(() => document.getElementById('retry-btn').focus(), 100);
    }

    function createTeamLogo(imgUrl, teamName, isExactMatch) {
        if (!isExactMatch || imgUrl.includes('placeholder.com')) {
            const div = document.createElement('div');
            div.className = 'protv-logo';
            div.textContent = 'PRO TV';
            return div;
        } else {
            const img = document.createElement('img');
            img.src = imgUrl;
            img.alt = 'شعار ' + teamName;
            img.className = 'team-logo';
            return img;
        }
    }

    function abbreviateTeamName(teamName) {
        const parts = teamName.split(' ');
        if (parts.length > 1) {
            return parts && parts.length > 0 ? parts.slice(0, 1).join('').charAt(0) + '.' + parts.slice(-1).join('') : teamName;
        }
        return teamName;
    }
    
    function updateSingleMatchTimer(matchRow) {
        const countdownCircle = matchRow.querySelector('.countdown-circle');
        const timeText = countdownCircle?.querySelector('.time-text');
        
        if (!timeText) return;

        const radius = 28;
        const circumference = 2 * Math.PI * radius;
        const firstHalfEnd = 45;
        const breakDuration = 15;
        const totalMatchDuration = 90;
        const countdownStartMinutes = 30;
        
        const progress = countdownCircle.querySelector('.progress');
        if (progress) {
            progress.style.strokeDasharray = circumference;
            progress.style.strokeDashoffset = circumference;
        }
        
        setInterval(() => {
            const now = luxon.DateTime.local();
            const matchTimestamp = timeText.getAttribute('data-match-timestamp');
            const matchDate = matchTimestamp ? luxon.DateTime.fromMillis(parseInt(matchTimestamp)) : null;
            
            if (!matchDate) {
                timeText.textContent = timeText.getAttribute('data-time');
                if (countdownCircle) countdownCircle.style.display = 'block';
                return;
            }
            
            const timeDifferenceInSeconds = now.diff(matchDate, 'seconds').seconds;
            const timeUntilMatchInSeconds = matchDate.diff(now, 'seconds').seconds;
            let minutesElapsed;
            
            const matchEndTimestamp = matchDate.plus({ hours: 2 }).toMillis();
            
            if (now.toMillis() > matchEndTimestamp) {
                countdownCircle.style.display = 'none';
            } else if (timeUntilMatchInSeconds > 0 && timeUntilMatchInSeconds <= countdownStartMinutes * 60) {
                const remainingDuration = luxon.Duration.fromObject({ seconds: timeUntilMatchInSeconds }).rescale();
                const formattedTime = remainingDuration.toFormat('h:mm:ss');
                
                timeText.innerHTML = `<span class="countdown-time">${formattedTime}</span>`;
                timeText.style.fontSize = '12px';
                
                const percent = 1 - (timeUntilMatchInSeconds / (countdownStartMinutes * 60));
                if(progress) progress.style.stroke = "green";
                if(progress) progress.style.strokeDashoffset = circumference * (1 - percent);
            } else if (timeDifferenceInSeconds >= 0) {
                if(progress) progress.style.stroke = "red";
                if(timeText) timeText.style.fontSize = '14px';

                if (timeDifferenceInSeconds <= firstHalfEnd * 60) {
                    minutesElapsed = Math.floor(timeDifferenceInSeconds / 60);
                    timeText.textContent = `${minutesElapsed}'`;
                    const percent = minutesElapsed / totalMatchDuration;
                    if(progress) progress.style.strokeDashoffset = circumference * (1 - percent);
                } else if (timeDifferenceInSeconds <= (firstHalfEnd + breakDuration) * 60) {
                    timeText.textContent = 'Break';
                    const percent = firstHalfEnd / totalMatchDuration;
                    if(progress) progress.style.strokeDashoffset = circumference * (1 - percent);
                } else if (timeDifferenceInSeconds <= (totalMatchDuration + breakDuration) * 60) {
                    const secondHalfTime = timeDifferenceInSeconds - (firstHalfEnd + breakDuration) * 60;
                    minutesElapsed = Math.floor(secondHalfTime / 60) + firstHalfEnd;
                    
                    if (minutesElapsed >= 90) {
                         timeText.textContent = "90+'";
                         minutesElapsed = 90;
                    } else {
                         timeText.textContent = `${minutesElapsed}'`;
                    }
                    const percent = minutesElapsed / totalMatchDuration;
                    if(progress) progress.style.strokeDashoffset = circumference * (1 - percent);
                }
            } else {
                timeText.textContent = timeText.getAttribute('data-time');
                if(progress) progress.style.stroke = "red";
                if(progress) progress.style.strokeDashoffset = circumference;
                if(timeText) timeText.style.fontSize = '14px';
            }
        }, 1000);
    }
    
    function findLeagueName(homeTeam, awayTeam) {
        const teams = [homeTeam.trim(), awayTeam.trim()];

        for (const leagueName in leagues) {
            const leagueTeams = leagues[leagueName];
            const isHomeTeamInLeague = leagueTeams.includes(teams[0]);
            const isAwayTeamInLeague = leagueTeams.includes(teams[1]);

            if (isHomeTeamInLeague && isAwayTeamInLeague) {
                return leagueName;
            }
        }
        return null;
    }

    function renderMatches(matches) {
        matchesContainer.innerHTML = '';
        if (matches.length === 0) {
            matchesContainer.innerHTML = '<p style="text-align:center;">لم يتم العثور على مباريات</p>';
            return;
        }

        const importantMatches = [];
        const otherMatches = [];

        matches.forEach(match => {
            const homeTeam = match.querySelector('.team.hometeam .the_team')?.innerText.trim() || 'فريق';
            const awayTeam = match.querySelector('.team.awayteam .the_team')?.innerText.trim() || 'فريق';
            const importantTeams = ["إسبانيا","البرتغال","إنجلترا","إيطاليا","فرنسا","العراق","الهلال", "النصر", "ريال مدريد", "برشلونة", "ليفربول", "مانشستر سيتي", "الأهلي السعودي", "الأهلي المصري","الأهلي القطري","السد","الغرافة","الزمالك","مصر","آرسنال"];
            const isImportant = importantTeams.some(teamName => homeTeam.includes(teamName) || awayTeam.includes(teamName));
            if (isImportant) {
                importantMatches.push(match);
            } else {
                otherMatches.push(match);
            }
        });

        const sortedMatches = importantMatches.concat(otherMatches);

        function displayMatchesGradually(matchList) {
            let index = 0;
            function displayNextMatch() {
                if (index < matchList.length) {
                    const match = matchList[index];
                    const homeTeam = match.querySelector('.team.hometeam .the_team')?.innerText.trim() || 'فريق';
                    const awayTeam = match.querySelector('.team.awayteam .the_team')?.innerText.trim() || 'فريق';
                    
                    let matchScoreText = match.querySelector('.score')?.innerText.trim() ||
                                         match.querySelector('.match_score')?.innerText.trim() ||
                                         null;
                    
                    let mainScore = matchScoreText;
                    let penaltiesScore = null;
                    if (matchScoreText && matchScoreText.includes('(')) {
                        const scoreParts = matchScoreText.split('(');
                        mainScore = scoreParts[0].trim();
                        penaltiesScore = scoreParts[1].replace(')', '').trim();
                    }

                    const leagueName = findLeagueName(homeTeam, awayTeam);

                    let homeLogo = 'https://via.placeholder.com/60';
                    let awayLogo = 'https://via.placeholder.com/60';
                    let isHomeLogoExactMatch = false;
                    let isAwayLogoExactMatch = false;

                    if (leagueName && teamLogos[leagueName]) {
                        if (teamLogos[leagueName][homeTeam]) {
                            homeLogo = teamLogos[leagueName][homeTeam];
                            isHomeLogoExactMatch = true;
                        }
                        if (teamLogos[leagueName][awayTeam]) {
                            awayLogo = teamLogos[leagueName][awayTeam];
                            isAwayLogoExactMatch = true;
                        }
                    }

                    const matchTimeElement = match.querySelector('.match_time .the_otime');
                    const matchTime = matchTimeElement?.innerText.trim() || '-';
                    const timeOnly = matchTime.match(/\d{1,2}:\d{2}/) ? matchTime.match(/\d{1,2}:\d{2}/)[0] : matchTime;

                    let matchDateObject = null;
                    if (timeOnly !== '-') {
                        const now = luxon.DateTime.local();
                        const [hours, minutes] = timeOnly.split(':').map(Number);
                        
                        let matchDate = now;
                        matchDateObject = matchDate.set({ hour: hours, minute: minutes, second: 0, millisecond: 0 });
                        
                        if (matchDateObject < now.minus({ hours: 12 })) {
                             matchDateObject = matchDateObject.plus({ days: 1 });
                        }
                    }

                    const matchTimestamp = matchDateObject ? matchDateObject.toMillis() : '';
                    
                    const now = luxon.DateTime.local();
                    const isFinished = (matchDateObject && now > matchDateObject.plus({ hours: 2 }));
                    const isLive = !isFinished && matchDateObject && now >= matchDateObject && now <= matchDateObject.plus({ hours: 2 });
                    
                    const timeUntilMatchInSeconds = matchDateObject ? matchDateObject.diff(now, 'seconds').seconds : 0;
                    const isNotStartedYet = !isFinished && !isLive && (timeUntilMatchInSeconds > 1800);
                    
                    const matchRow = document.createElement('div');
                    matchRow.className = 'match-row';
                    matchRow.style.opacity = '0';
                    matchRow.style.transition = 'opacity 0.5s ease-in-out';
                    matchRow.tabIndex = 0;

                    matchRow.innerHTML = `
                        ${leagueName ? `<div class="league-name">${leagueName}</div>` : ''}
                        <div class="teams-time">
                          <div class="team" id="home-team-container-${index}"></div>
                          <div class="match-time" id="match-time-container-${index}"></div>
                          <div class="team" id="away-team-container-${index}"></div>
                        </div>
                        <div class="channel-container" id="channel-container-${index}"></div>
                    `;
                    
                    matchesContainer.appendChild(matchRow);
                    
                    const homeContainer = matchRow.querySelector(`#home-team-container-${index}`);
                    homeContainer.appendChild(createTeamLogo(homeLogo, homeTeam, isHomeLogoExactMatch));
                    const homeNameDiv = document.createElement('div');
                    homeNameDiv.className = 'team-name';
                    homeNameDiv.textContent = abbreviateTeamName(homeTeam);
                    homeContainer.appendChild(homeNameDiv);

                    const awayContainer = matchRow.querySelector(`#away-team-container-${index}`);
                    awayContainer.appendChild(createTeamLogo(awayLogo, awayTeam, isAwayLogoExactMatch));
                    const awayNameDiv = document.createElement('div');
                    awayNameDiv.className = 'team-name';
                    awayNameDiv.textContent = abbreviateTeamName(awayTeam);
                    awayContainer.appendChild(awayNameDiv);

                    const matchTimeContainer = matchRow.querySelector(`#match-time-container-${index}`);

                    if (isFinished && mainScore) {
                        const finishedScoreDiv = document.createElement('div');
                        finishedScoreDiv.className = 'match-score-finished';
                        const mainScoreSpan = document.createElement('span');
                        mainScoreSpan.className = 'main-score';
                        mainScoreSpan.textContent = mainScore;
                        finishedScoreDiv.appendChild(mainScoreSpan);
                        if (penaltiesScore) {
                            const penaltiesSpan = document.createElement('span');
                            penaltiesSpan.className = 'penalties-score';
                            penaltiesSpan.textContent = `(${penaltiesScore})`;
                            finishedScoreDiv.appendChild(penaltiesSpan);
                        }
                        matchTimeContainer.appendChild(finishedScoreDiv);
                    } else {
                        const countdownCircle = document.createElement('div');
                        countdownCircle.className = 'countdown-circle';
                        countdownCircle.innerHTML = `
                            <svg>
                                <circle class="bg"></circle>
                                <circle class="progress"></circle>
                            </svg>
                            <div class="time-text" data-time="${timeOnly}"
                                                 data-match-timestamp="${matchTimestamp || ''}"
                                                 data-score="${mainScore || ''}"
                                                 data-penalties="${penaltiesScore || ''}">
                                ${timeOnly}
                            </div>
                        `;
                        matchTimeContainer.appendChild(countdownCircle);
                        updateSingleMatchTimer(matchRow);
                    }


                    const channelContainer = matchRow.querySelector(`#channel-container-${index}`);
                    const watchBtnContainer = document.createElement('div');
                    watchBtnContainer.className = 'watch-btn-container';

                    const watchBtn = document.createElement('a');
                    watchBtn.href = '#';
                    watchBtn.className = 'watch-btn';
                    watchBtn.textContent = 'شاهد المباراة';
                    watchBtn.tabIndex = 0;

                    const finishedBtn = document.createElement('div');
                    finishedBtn.className = 'finished-btn';
                    finishedBtn.textContent = 'انتهت';

                    const notStartedBtn = document.createElement('div');
                    notStartedBtn.className = 'not-started-btn';
                    notStartedBtn.textContent = 'لم تبدأ بعد';

                    if (isFinished) {
                        watchBtnContainer.appendChild(finishedBtn);
                    } else if (isLive || timeUntilMatchInSeconds <= 1800 && timeUntilMatchInSeconds > 0) {
                        // تم تعديل استدعاء الدالة هنا
                        watchBtn.addEventListener('click', (event) => {
                            event.preventDefault();
                            renderLiveServers(leagueName);
                            liveServersModal.style.display = 'block';
                        });
                        watchBtnContainer.appendChild(watchBtn);
                    } else {
                         watchBtnContainer.appendChild(notStartedBtn);
                    }
                    
                    channelContainer.appendChild(watchBtnContainer);

                    setTimeout(() => {
                        matchRow.style.opacity = '1';
                    }, 10); 
                    
                    index++;
                    setTimeout(displayNextMatch, 500); 
                } else {
                    const firstMatchRow = document.querySelector('.match-row');
                    if (firstMatchRow) {
                        firstMatchRow.focus();
                    }
                }
            }
            displayNextMatch();
        }
        
        displayMatchesGradually(sortedMatches);
    }

    function searchMatches() {
        const query = searchInput.value.toLowerCase().trim();
        const filteredMatches = allMatches.filter(match => {
            const homeTeam = match.querySelector('.team.hometeam .the_team')?.innerText.trim().toLowerCase() || '';
            const awayTeam = match.querySelector('.team.awayteam .the_team')?.innerText.trim().toLowerCase() || '';
            return homeTeam.includes(query) || awayTeam.includes(query);
        });
        renderMatches(filteredMatches);
    }

    refreshBtn.addEventListener('click', () => {
        loadMatches('https://jdwel.com/today/');
    });

    searchInput.addEventListener('input', searchMatches);

    liveServersModalCloseBtn.addEventListener('click', () => {
        liveServersModal.style.display = 'none';
        const activeElement = document.activeElement;
        if (activeElement && activeElement.classList.contains('watch-btn')) {
            activeElement.focus();
        }
    });
    
    externalPlayerModalCloseBtn.addEventListener('click', () => {
        externalPlayerModal.style.display = 'none';
        liveServersModal.style.display = 'block';
        setTimeout(() => {
            const firstServerBtn = liveServersModal.querySelector('.live-server-btn');
            if (firstServerBtn) {
                firstServerBtn.focus();
            }
        }, 100);
    });

    window.addEventListener('click', (event) => {
        if (event.target === liveServersModal) {
            liveServersModal.style.display = 'none';
        }
        if (event.target === externalPlayerModal) {
            externalPlayerModal.style.display = 'none';
        }
    });

    document.addEventListener('keydown', (event) => {
        const activeElement = document.activeElement;

        if (activeElement === searchInput) {
            return;
        }

        let isHandled = false;
        let nextElement = null;

        if (event.key === 'ArrowDown' || event.key === 'Down') {
            const focusableElements = Array.from(document.querySelectorAll('.match-row:not([style*="opacity: 0"]), .watch-btn, .retry-btn, .live-server-btn, .nav-item, #refresh-btn, #search-input'));
            const currentIndex = focusableElements.indexOf(activeElement);
            if (currentIndex !== -1 && currentIndex < focusableElements.length - 1) {
                nextElement = focusableElements[currentIndex + 1];
            }
            isHandled = true;
        } else if (event.key === 'ArrowUp' || event.key === 'Up') {
            const focusableElements = Array.from(document.querySelectorAll('.match-row:not([style*="opacity: 0"]), .watch-btn, .retry-btn, .live-server-btn, .nav-item, #refresh-btn, #search-input'));
            const currentIndex = focusableElements.indexOf(activeElement);
            if (currentIndex > 0) {
                nextElement = focusableElements[currentIndex - 1];
            }
            isHandled = true;
        } else if (event.key === 'Enter' || event.key === ' ') {
            if (activeElement && activeElement.click) {
                activeElement.click();
            }
            isHandled = true;
        }

        if (nextElement) {
            nextElement.focus();
            isHandled = true;
        }

        if (isHandled) {
            event.preventDefault();
        }
    });

    document.addEventListener('DOMContentLoaded', () => {
        loadMatches('https://jdwel.com/today/');
    });
</script>
</body>
</html>
